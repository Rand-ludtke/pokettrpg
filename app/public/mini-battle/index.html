<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PS Mini Battle Viewer</title>
    <style>
      body { font-family: system-ui, sans-serif; background: #1b1e24; color: #e8eaf0; margin: 0; }
      header { padding: 12px 16px; background: #2a2f3a; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
      main { display: grid; grid-template-columns: 1fr 320px; gap: 12px; padding: 12px; }
  .field { background: #0f131a; border-radius: 8px; padding: 12px; position: relative; height: 360px; overflow: hidden; }
  .slot { position: absolute; width: 96px; height: 96px; }
  /* P1 slots (bottom-left area) */
  .slot.p1a { left: 24px; bottom: 36px; }
  .slot.p1b { left: 124px; bottom: 64px; }
  .slot.p1c { left: 224px; bottom: 36px; }
  /* P2 slots (top-right area) */
  .slot.p2a { right: 24px; top: 28px; }
  .slot.p2b { right: 124px; top: 56px; }
  .slot.p2c { right: 224px; top: 28px; }
  .mon { position: absolute; width: 96px; height: 96px; transition: transform 180ms ease, opacity 200ms; }
      .log { background: #0f131a; border-radius: 8px; padding: 12px; height: 320px; overflow: auto; white-space: pre-wrap; font-size: 12px; }
      .controls { grid-column: 1 / -1; background: #0f131a; border-radius: 8px; padding: 12px; display:flex; gap:8px; align-items:center; }
      button { background: #3a7afe; color: white; border: 0; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
      input[type="file"]{ color:#cbd5e1; }
    </style>
  </head>
  <body>
    <header>
      <h3>Pok√©mon Showdown Mini Battle Viewer</h3>
    </header>
    <main>
      <div class="field">
        <div class="slot p1a"><img id="p1a-mon" class="mon" alt="p1a" /></div>
        <div class="slot p1b"><img id="p1b-mon" class="mon" alt="p1b" /></div>
        <div class="slot p1c"><img id="p1c-mon" class="mon" alt="p1c" /></div>
        <div class="slot p2a"><img id="p2a-mon" class="mon" alt="p2a" /></div>
        <div id="overlay" style="position:absolute; inset:0; pointer-events:none;"></div>
      </div>
      <div class="log" id="log"></div>
      <!-- Embedded mode: no local controls; parent app drives viewer via postMessage -->
    </main>
    <script type="module" src="viewer.js"></script>
  </body>
</html>
