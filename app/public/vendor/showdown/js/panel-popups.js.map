{"version":3,"file":"panel-popups.js","names":["UserRoom","_PSRoom","options","_options$args","_this","call","classType","userid","name","isSelf","id","split","setName","args","username","_inheritsLoose","_proto","prototype","toID","PS","user","test","charAt","update","send","PSRoom","UserPanel","_PSRoomPanel","_this2","_len","arguments","length","Array","_key","apply","concat","lookup","ev","_querySelector","preventDefault","stopImmediatePropagation","room","props","base","querySelector","value","maybeReset","_querySelector2","_proto2","renderUser","mainmenu","userdetailsCache","slice","avatar","hideInteraction","startsWith","group","server","getGroup","groupName","type","preact","h","style","globalGroup","globalGroupName","roomsList","rooms","battlebuf","chatbuf","privatebuf","roomid","curRoom","roomrank","toRoomid","substr","p1","p2","ownBattle","toUserid","roomLink","href","title","isPrivate","push","unshift","away","status","buttonbar","disabled","named","onClick","console","info","join","parentElem","currentTarget","e","parentRoomid","Dex","resolveAvatar","src","Config","routes","users","target","BattleLog","usernameColor","customgroup","render","showLookup","PSPanelWrapper","onSubmit","minWidth","onInput","onChange","PSRoomPanel","Model","location","UserOptionsPanel","_PSRoomPanel2","_this3","_len2","_key2","handleMute","setState","showMuteInput","showBanInput","showLockInput","handleBan","handleLock","handleCancel","showConfirm","handleConfirm","data","state","_this3$getTargets","getTargets","targetUser","targetRoom","cmd","action","duration","reason","close","handleAddFriend","_this3$getTargets2","requestSent","handleIgnore","_this3$getTargets3","handleUnignore","_this3$getTargets4","muteUser","_this3$base","hrMute","banUser","_this3$base2","weekBan","lockUser","_this3$base3","weekLock","isNamelock","isIgnoringUser","ignoring","prefs","ignore","_proto3","_targetRoom","_targetRoom2","_targetRoom3","_targetRoom4","_targetRoom5","_this$props$room$id$s","targetRoomid","getParent","_this4","_this$state$data","_this$state$data2","_this$state$data3","banPerms","mutePerms","_this$getTargets","userRoomGroup","canMute","includes","canBan","canLock","isVisible","actionName","width","endsWith","Fragment","placeholder","noURL","UserListPanel","_PSRoomPanel3","_proto4","parentRoom","Error","ChatUserList","VolumePanel","_PSRoomPanel4","_this5","_len3","_key3","setVolume","slider","set","Number","forceUpdate","setMute","checkbox","checked","_proto5","componentDidMount","_this6","subscriptions","subscribe","mute","effectvolume","min","max","step","onKeyUp","musicvolume","notifvolume","OptionsPanel","_PSRoomPanel5","_this7","_len4","_key4","setTheme","theme","setLayout","_PS","layout","rightPanel","setChatroomTimestamp","timestamp","Object","assign","timestamps","chatrooms","undefined","setPMsTimestamp","pms","handleShowStatusInput","showStatusInput","handleOnChange","elem","setting","loadSpriteData","noanim","editStatus","_statusInput$value","statusInput","showStatusUpdated","_proto6","subscribeTo","_PS$user$registered","height","verticalAlign","registered","className","selected","onepanel","bwgfx","nopastgens","blockPMs","blockChallenges","inchatpm","noselfhighlight","leavePopupRoom","refreshprompt","language","tournaments","GooglePasswordBox","_preact$Component","_proto7","_this8","window","gapiCallback","response","changeNameWithPassword","credential","needsGoogle","gapiLoaded","script","document","createElement","async","getElementsByTagName","appendChild","Component","LoginPanel","_PSRoomPanel6","_this9","_len5","_key5","handleSubmit","passwordBox","getUsername","changeName","reset","handleShowPassword","passwordShown","_proto8","_this10","success","setTimeout","focus","_this$props$room$args","_this$base","loginName","loggingIn","input","_ref","usernameBox","select","loginState","error","autocomplete","needsPassword","maxWidth","margin","AvatarsPanel","_PSRoomPanel7","_this11","_len6","_key6","setLocalAvatar","_this11$base","trim","_proto9","avatars","i","_window$BattleAvatarN","BattleAvatarNumbers","map","_ref2","Math","floor","BattleForfeitPanel","_PSRoomPanel8","_proto10","battleRoom","battle","rated","ReplacePlayerPanel","_PSRoomPanel9","_this12","_len7","_key7","handleReplacePlayer","_room$getParent","_this12$base","newPlayer","add","ended","playerSlot","_proto11","ChangePasswordPanel","_PSRoomPanel10","_this13","_len8","_key8","handleChangePassword","_this13$base","_this13$base2","_this13$base3","oldpassword","password","cpassword","errorMsg","PSLoginServer","query","then","actionerror","alert","err","message","_proto12","_this$state$errorMsg","readOnly","RegisterPanel","_PSRoomPanel11","_this14","_len9","_key9","handleRegisterUser","_this14$base","_this14$base2","_this14$base3","captcha","challstr","_data$curuser","curuser","loggedin","assertion","handleAssertion","_proto13","_this$state$errorMsg2","alt","rightPopup","BackgroundListPanel","_PSRoomPanel12","_this15","_len10","_key10","setBg","curtarget","bg","_this15$props$room$ar","PSBackground","bgUrl","uploadBg","_this15$base","handleUploadedFiles","files","handleDrop","_ev$dataTransfer","_files$","dataTransfer","skipConfirm","file","reader","FileReader","onload","_PS$rooms$changebackg","result","onerror","readAsDataURL","_proto14","renderUpload","_room$args","_room$args2","option","val","accept","ChatFormattingPanel","_PSRoomPanel13","_this16","_len11","_key11","curPref","chatformatting","_proto15","ctrl","PSView","isMac","hidegreentext","hideme","hidespoiler","hidelinks","hideinterstice","LeaveRoomPanel","_PSRoomPanel14","_proto16","BattleOptionsPanel","_PSRoomPanel15","_this17","_len12","_key12","handleHardcoreMode","mode","getBattleRoom","setHardcoreMode","handleIgnoreSpectators","ignoreSpects","chats","querySelectorAll","displaySetting","_i2","chat","small","text","innerText","isPlayerChat","display","scene","log","updateScroll","handleIgnoreOpponent","ignoreOpponent","resetToCurrentTurn","handleIgnoreNicks","ignoreNicks","handleAllSettings","disallowSpectators","_proto17","_battleRoom$battle","isPlayer","myPokemon","canOfferTie","turn","hardcoreMode","disallowspectators","ignorenicks","ignorespects","ignoreopp","autotimer","body","offsetWidth","rightpanelbattles","PopupRoom","_PSRoom2","_this18$args","_this18","_len13","_key13","returnValue","cancelValue","_proto18","destroy","_this$args","callback","PopupPanel","_PSRoomPanel16","_this19","_len14","_key14","_room$args3","okValue","textbox","_proto19","_this$props$room$args2","parseMessage","sanitizeHTML","_room$args4","_room$args5","_room$args6","_room$args7","_room$args8","_room$args9","_room$args10","okButton","cancelButton","otherButtons","dangerouslySetInnerHTML","__html","RoomTabListPanel","_PSRoomPanel17","_this20","_len15","_key15","startingLayout","handleLayoutChange","_proto20","verticalTabs","leftRoomList","PSHeader","renderRoomTab","rightRoomList","BattleTimerPanel","_PSRoomPanel18","_proto21","kickingInactive","RulesPanel","_PSRoomPanel19","_proto22","_this21","isWarn","timerRef","setInterval","timeLeft","canClose","clearInterval","_room$args11","_room$args12","_room$args13","escapeHTML","addRoomType"],"sources":["../src/panel-popups.tsx"],"sourcesContent":["import preact from \"../js/lib/preact\";\nimport { toID, toRoomid, toUserid, Dex } from \"./battle-dex\";\nimport type { ID } from \"./battle-dex-data\";\nimport { BattleLog } from \"./battle-log\";\nimport { PSLoginServer } from \"./client-connection\";\nimport { PSBackground } from \"./client-core\";\nimport {\n\tPS, PSRoom, Config, type RoomOptions, type PSLoginState, type RoomID, type TimestampOptions,\n} from \"./client-main\";\nimport { type BattleRoom } from \"./panel-battle\";\nimport { ChatUserList, type ChatRoom } from \"./panel-chat\";\nimport { PSRoomPanel, PSPanelWrapper, PSView } from \"./panels\";\nimport { PSHeader } from \"./panel-topbar\";\n\n/**\n * User popup\n */\n\nexport class UserRoom extends PSRoom {\n\toverride readonly classType = 'user';\n\tuserid!: ID;\n\tname!: string;\n\tisSelf!: boolean;\n\tconstructor(options: RoomOptions) {\n\t\tsuper(options);\n\t\tconst userid = (this.id.split('-')[1] || '') as ID;\n\t\tthis.setName(options.args?.username as string || userid);\n\t}\n\tsetName(name: string) {\n\t\tthis.name = name;\n\t\tthis.userid = toID(name);\n\t\tthis.isSelf = (this.userid === PS.user.userid);\n\t\tif (/[a-zA-Z0-9]/.test(this.name.charAt(0))) this.name = ' ' + this.name;\n\t\tthis.update(null);\n\t\tif (this.userid) PS.send(`/cmd userdetails ${this.userid}`);\n\t}\n}\n\nclass UserPanel extends PSRoomPanel<UserRoom> {\n\tstatic readonly id = 'user';\n\tstatic readonly routes = ['user-*', 'viewuser-*', 'users'];\n\tstatic readonly Model = UserRoom;\n\tstatic readonly location = 'popup';\n\n\trenderUser() {\n\t\tconst room = this.props.room;\n\t\tif (!room.userid) return null;\n\t\tconst user = PS.mainmenu.userdetailsCache[room.userid] || {\n\t\t\tuserid: room.userid, name: room.name.slice(1), avatar: '[loading]',\n\t\t};\n\t\tif (!user.avatar) {\n\t\t\t// offline; server doesn't know the actual username\n\t\t\tuser.name = room.name;\n\t\t}\n\t\tconst hideInteraction = room.id.startsWith('viewuser-');\n\n\t\tconst group = PS.server.getGroup(room.name);\n\t\tlet groupName: preact.ComponentChild = group.name || null;\n\t\tif (group.type === 'punishment') {\n\t\t\tgroupName = <span style=\"color:#777777\">{groupName}</span>;\n\t\t}\n\n\t\tconst globalGroup = PS.server.getGroup(user.group);\n\t\tlet globalGroupName: preact.ComponentChild = globalGroup.name && `Global ${globalGroup.name}` || null;\n\t\tif (globalGroup.type === 'punishment') {\n\t\t\tglobalGroupName = <span style=\"color:#777777\">{globalGroupName}</span>;\n\t\t}\n\t\tif (globalGroup.name === group.name) groupName = null;\n\n\t\tlet roomsList: preact.ComponentChild = null;\n\t\tif (user.rooms) {\n\t\t\tlet battlebuf = [];\n\t\t\tlet chatbuf = [];\n\t\t\tlet privatebuf = [];\n\t\t\tfor (let roomid in user.rooms) {\n\t\t\t\tif (roomid === 'global') continue;\n\t\t\t\tconst curRoom = user.rooms[roomid];\n\t\t\t\tlet roomrank: preact.ComponentChild = null;\n\t\t\t\tif (!/[A-Za-z0-9]/.test(roomid.charAt(0))) {\n\t\t\t\t\troomrank = <small style=\"color: #888; font-size: 100%\">{roomid.charAt(0)}</small>;\n\t\t\t\t}\n\t\t\t\troomid = toRoomid(roomid);\n\n\t\t\t\tif (roomid.substr(0, 7) === 'battle-') {\n\t\t\t\t\tconst p1 = curRoom.p1!.substr(1);\n\t\t\t\t\tconst p2 = curRoom.p2!.substr(1);\n\t\t\t\t\tconst ownBattle = (PS.user.userid === toUserid(p1) || PS.user.userid === toUserid(p2));\n\t\t\t\t\tconst roomLink = <a\n\t\t\t\t\t\thref={`/${roomid}`} class={'ilink' + (ownBattle || roomid in PS.rooms ? ' yours' : '')}\n\t\t\t\t\t\ttitle={`${p1 || '?'} v. ${p2 || '?'}`}\n\t\t\t\t\t>{roomrank}{roomid.substr(7)}</a>;\n\t\t\t\t\tif (curRoom.isPrivate) {\n\t\t\t\t\t\tif (privatebuf.length) privatebuf.push(', ');\n\t\t\t\t\t\tprivatebuf.push(roomLink);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (battlebuf.length) battlebuf.push(', ');\n\t\t\t\t\t\tbattlebuf.push(roomLink);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst roomLink = <a href={`/${roomid}`} class={'ilink' + (roomid in PS.rooms ? ' yours' : '')}>\n\t\t\t\t\t\t{roomrank}{roomid}\n\t\t\t\t\t</a>;\n\t\t\t\t\tif (curRoom.isPrivate) {\n\t\t\t\t\t\tif (privatebuf.length) privatebuf.push(\", \");\n\t\t\t\t\t\tprivatebuf.push(roomLink);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (chatbuf.length) chatbuf.push(', ');\n\t\t\t\t\t\tchatbuf.push(roomLink);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (battlebuf.length) battlebuf.unshift(<br />, <em>Battles:</em>, \" \");\n\t\t\tif (chatbuf.length) chatbuf.unshift(<br />, <em>Chatrooms:</em>, \" \");\n\t\t\tif (privatebuf.length) privatebuf.unshift(<br />, <em>Private rooms:</em>, \" \");\n\t\t\tif (battlebuf.length || chatbuf.length || privatebuf.length) {\n\t\t\t\troomsList = <small class=\"rooms\">{battlebuf}{chatbuf}{privatebuf}</small>;\n\t\t\t}\n\t\t} else if (user.rooms === false) {\n\t\t\troomsList = <strong class=\"offline\">OFFLINE</strong>;\n\t\t}\n\n\t\tconst isSelf = user.userid === PS.user.userid;\n\t\tlet away = false;\n\t\tlet status = null;\n\t\tif (user.status) {\n\t\t\taway = user.status.startsWith('!');\n\t\t\tstatus = away ? user.status.slice(1) : user.status;\n\t\t}\n\n\t\tconst buttonbar = [];\n\t\tif (!hideInteraction) {\n\t\t\tbuttonbar.push(isSelf ? (\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t<button class=\"button\" disabled>Challenge</button> {}\n\t\t\t\t\t<button class=\"button\" data-href=\"dm-\">Chat Self</button>\n\t\t\t\t</p>\n\t\t\t) : !PS.user.named ? (\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t<button class=\"button\" disabled>Challenge</button> {}\n\t\t\t\t\t<button class=\"button\" disabled>Chat</button> {}\n\t\t\t\t\t<button class=\"button\" disabled>{'\\u2026'}</button>\n\t\t\t\t</p>\n\t\t\t) : (\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t<button class=\"button\" data-href={`challenge-${user.userid}`} onClick={(ev: Event)=>{ try{ ev.preventDefault(); ev.stopImmediatePropagation(); console.info('[PS][challenge] user popup Challenge clicked', { userid: user.userid }); PS.join(`challenge-${user.userid}` as RoomID, { parentElem: ev.currentTarget as any }); } catch(e){} }}>Challenge</button> {}\n\t\t\t\t\t<button class=\"button\" data-href={`dm-${user.userid}`}>Chat</button> {}\n\t\t\t\t\t<button class=\"button\" data-href={`useroptions-${user.userid}-${room.parentRoomid || ''}`}>{'\\u2026'}</button>\n\t\t\t\t</p>\n\t\t\t));\n\t\t\tif (isSelf) {\n\t\t\t\tbuttonbar.push(\n\t\t\t\t\t<hr />,\n\t\t\t\t\t<p class=\"buttonbar\" style=\"text-align: right\">\n\t\t\t\t\t\t<button class=\"button\" data-href=\"login\"><i class=\"fa fa-pencil\" aria-hidden></i> Change name</button> {}\n\t\t\t\t\t\t<button class=\"button\" data-cmd=\"/logout\"><i class=\"fa fa-power-off\" aria-hidden></i> Log out</button>\n\t\t\t\t\t</p>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst avatar = user.avatar !== '[loading]' ? Dex.resolveAvatar(`${user.avatar || 'unknown'}`) : null;\n\t\treturn [<div class=\"userdetails\">\n\t\t\t{avatar && (room.isSelf ? (\n\t\t\t\t<img src={avatar} class=\"trainersprite yours\" data-href=\"avatars\" />\n\t\t\t) : (\n\t\t\t\t<img src={avatar} class=\"trainersprite\" />\n\t\t\t))}\n\t\t\t<strong><a\n\t\t\t\thref={`//${Config.routes.users}/${user.userid}`} target=\"_blank\"\n\t\t\t\tstyle={`color: ${away ? '#888888' : BattleLog.usernameColor(user.userid)}`}\n\t\t\t>\n\t\t\t\t{user.name}\n\t\t\t</a></strong><br />\n\t\t\t{status && <div class=\"userstatus\">{status}</div>}\n\t\t\t{groupName && <div class=\"usergroup roomgroup\">{groupName}</div>}\n\t\t\t{globalGroupName && <div class=\"usergroup globalgroup\">{globalGroupName}</div>}\n\t\t\t{user.customgroup && <div class=\"usergroup globalgroup\">{user.customgroup}</div>}\n\t\t\t{!hideInteraction && roomsList}\n\t\t</div>, buttonbar];\n\t}\n\n\tlookup = (ev: Event) => {\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t\tconst room = this.props.room;\n\t\tconst username = this.base!.querySelector<HTMLInputElement>('input[name=username]')?.value;\n\t\troom.setName(username || '');\n\t};\n\tmaybeReset = (ev: Event) => {\n\t\tconst room = this.props.room;\n\t\tconst username = this.base!.querySelector<HTMLInputElement>('input[name=username]')?.value;\n\t\tif (toID(username) !== room.userid) {\n\t\t\troom.setName('');\n\t\t}\n\t};\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst showLookup = room.id === 'users';\n\n\t\treturn <PSPanelWrapper room={room}><div class=\"pad\">\n\t\t\t{showLookup && <form onSubmit={this.lookup} style={{ minWidth: '278px' }}>\n\t\t\t\t<label class=\"label\">\n\t\t\t\t\tUsername: {}\n\t\t\t\t\t<input type=\"search\" name=\"username\" class=\"textbox autofocus\" onInput={this.maybeReset} onChange={this.maybeReset} />\n\t\t\t\t</label>\n\t\t\t\t{!room.userid && <p class=\"buttonbar\">\n\t\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Look up</strong></button> {}\n\t\t\t\t\t<button name=\"closeRoom\" class=\"button\">Close</button>\n\t\t\t\t</p>}\n\t\t\t\t{!!room.userid && <hr />}\n\t\t\t</form>}\n\n\t\t\t{this.renderUser()}\n\t\t</div></PSPanelWrapper>;\n\t}\n}\n\nclass UserOptionsPanel extends PSRoomPanel {\n\tstatic readonly id = 'useroptions';\n\tstatic readonly routes = ['useroptions-*'];\n\tstatic readonly location = 'popup';\n\tstatic readonly noURL = true;\n\tdeclare state: {\n\t\tshowMuteInput?: boolean,\n\t\tshowBanInput?: boolean,\n\t\tshowLockInput?: boolean,\n\t\tshowConfirm?: boolean,\n\t\trequestSent?: boolean,\n\t\tdata?: Record<string, string>,\n\t};\n\tgetTargets() {\n\t\tconst [, targetUser, targetRoomid] = this.props.room.id.split('-');\n\t\tlet targetRoom = (PS.rooms[targetRoomid] || null) as ChatRoom | null;\n\t\tif (targetRoom?.type !== 'chat') targetRoom = targetRoom?.getParent() as ChatRoom;\n\t\tif (targetRoom?.type !== 'chat') targetRoom = targetRoom?.getParent() as ChatRoom;\n\t\tif (targetRoom?.type !== 'chat') targetRoom = null;\n\t\treturn { targetUser: targetUser as ID, targetRoomid: targetRoomid as RoomID, targetRoom };\n\t}\n\n\thandleMute = (ev: Event) => {\n\t\tthis.setState({ showMuteInput: true, showBanInput: false, showLockInput: false });\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\thandleBan = (ev: Event) => {\n\t\tthis.setState({ showBanInput: true, showMuteInput: false, showLockInput: false });\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\thandleLock = (ev: Event) => {\n\t\tthis.setState({ showLockInput: true, showMuteInput: false, showBanInput: false });\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\n\thandleCancel = (ev: Event) => {\n\t\tthis.setState({ showBanInput: false, showMuteInput: false, showLockInput: false, showConfirm: false });\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\n\thandleConfirm = (ev: Event) => {\n\t\tconst data = this.state.data;\n\t\tif (!data) return;\n\t\tconst { targetUser, targetRoom } = this.getTargets();\n\n\t\tlet cmd = '';\n\t\tif (data.action === \"Mute\") {\n\t\t\tcmd += data.duration === \"1 hour\" ? \"/hourmute \" : \"/mute \";\n\t\t} else if (data.action === \"Ban\") {\n\t\t\tcmd += data.duration === \"1 week\" ? \"/weekban \" : \"/ban \";\n\t\t} else if (data.action === \"Lock\") {\n\t\t\tcmd += data.duration === \"1 week\" ? \"/weeklock \" : \"/lock \";\n\t\t} else if (data.action === \"Namelock\") {\n\t\t\tcmd += \"/namelock \";\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\tcmd += `${targetUser} ${data.reason ? ',' + data.reason : ''}`;\n\t\ttargetRoom?.send(cmd);\n\t\tthis.close();\n\t};\n\n\thandleAddFriend = (ev: Event) => {\n\t\tconst { targetUser, targetRoom } = this.getTargets();\n\t\ttargetRoom?.send(`/friend add ${targetUser}`);\n\t\tthis.setState({ requestSent: true });\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\n\thandleIgnore = () => {\n\t\tconst { targetUser, targetRoom } = this.getTargets();\n\t\ttargetRoom?.send(`/ignore ${targetUser}`);\n\t\tthis.close();\n\t};\n\n\thandleUnignore = () => {\n\t\tconst { targetUser, targetRoom } = this.getTargets();\n\t\ttargetRoom?.send(`/unignore ${targetUser}`);\n\t\tthis.close();\n\t};\n\n\tmuteUser = (ev: Event) => {\n\t\tthis.setState({ showMuteInput: false });\n\t\tconst hrMute = (ev.currentTarget as HTMLButtonElement).value === \"1hr\";\n\t\tconst reason = this.base?.querySelector<HTMLInputElement>(\"input[name=mutereason]\")?.value;\n\t\tconst data = {\n\t\t\taction: 'Mute',\n\t\t\treason,\n\t\t\tduration: hrMute ? \"1 hour\" : \"7 minutes\",\n\t\t};\n\t\tthis.setState({ data, showConfirm: true });\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\n\tbanUser = (ev: Event) => {\n\t\tthis.setState({ showBanInput: false });\n\t\tconst weekBan = (ev.currentTarget as HTMLButtonElement).value === \"1wk\";\n\t\tconst reason = this.base?.querySelector<HTMLInputElement>(\"input[name=banreason]\")?.value;\n\t\tconst data = {\n\t\t\taction: 'Ban',\n\t\t\treason,\n\t\t\tduration: weekBan ? \"1 week\" : \"2 days\",\n\t\t};\n\t\tthis.setState({ data, showConfirm: true });\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\n\tlockUser = (ev: Event) => {\n\t\tthis.setState({ showLockInput: false });\n\t\tconst weekLock = (ev.currentTarget as HTMLButtonElement).value === \"1wk\";\n\t\tconst isNamelock = (ev.currentTarget as HTMLButtonElement).value === \"nmlk\";\n\t\tconst reason = this.base?.querySelector<HTMLInputElement>(\"input[name=lockreason]\")?.value;\n\t\tconst data = {\n\t\t\taction: isNamelock ? 'Namelock' : 'Lock',\n\t\t\treason,\n\t\t\tduration: weekLock ? \"1 week\" : \"2 days\",\n\t\t};\n\t\tthis.setState({ data, showConfirm: true });\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\n\tisIgnoringUser = (userid: string) => {\n\t\tconst ignoring = PS.prefs.ignore || {};\n\t\tif (ignoring[userid] === 1) return true;\n\t\treturn false;\n\t};\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst banPerms = [\"@\", \"#\", \"~\"];\n\t\tconst mutePerms = [\"%\", ...banPerms];\n\t\tconst { targetUser, targetRoom } = this.getTargets();\n\t\tconst userRoomGroup = targetRoom?.users[PS.user.userid].charAt(0) || '';\n\t\tconst canMute = mutePerms.includes(userRoomGroup);\n\t\tconst canBan = banPerms.includes(userRoomGroup);\n\t\tconst canLock = mutePerms.includes(PS.user.group);\n\t\tconst isVisible = (actionName: string) => {\n\t\t\tif (actionName === 'mute') {\n\t\t\t\treturn canMute && !this.state.showLockInput && !this.state.showBanInput && !this.state.showConfirm;\n\t\t\t}\n\t\t\tif (actionName === 'ban') {\n\t\t\t\treturn canBan && !this.state.showLockInput && !this.state.showMuteInput && !this.state.showConfirm;\n\t\t\t}\n\t\t\tif (actionName === 'lock') {\n\t\t\t\treturn canLock && !this.state.showBanInput && !this.state.showMuteInput && !this.state.showConfirm;\n\t\t\t}\n\t\t};\n\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\n\t\t\t<p>\n\t\t\t\t{this.isIgnoringUser(targetUser) ? (\n\t\t\t\t\t<button onClick={this.handleUnignore} class=\"button\">\n\t\t\t\t\t\tUnignore\n\t\t\t\t\t</button>\n\t\t\t\t) : (\n\t\t\t\t\t<button onClick={this.handleIgnore} class=\"button\">\n\t\t\t\t\t\tIgnore\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<button data-href={`view-help-request-report-user-${targetUser}`} class=\"button\">\n\t\t\t\t\tReport\n\t\t\t\t</button>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t{this.state.requestSent ? (\n\t\t\t\t\t<button class=\"button disabled\">\n\t\t\t\t\t\tSent request\n\t\t\t\t\t</button>\n\t\t\t\t) : (\n\t\t\t\t\t<button onClick={this.handleAddFriend} class=\"button\">\n\t\t\t\t\t\tAdd friend\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</p>\n\t\t\t{(canMute || canBan || canLock) && <hr />}\n\t\t\t{this.state.showConfirm && <p>\n\t\t\t\t<small>\n\t\t\t\t\t{this.state.data?.action} <b>{targetUser}</b> {}\n\t\t\t\t\t{!this.state.data?.action.endsWith('ock') ? <>from <b>{targetRoom?.title}</b></> : ''} for {this.state.data?.duration}?\n\t\t\t\t</small>\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t<button class=\"button\" onClick={this.handleConfirm}>\n\t\t\t\t\t\t<i class=\"fa fa-confirm\" aria-hidden></i> Confirm\n\t\t\t\t\t</button> {}\n\t\t\t\t\t<button class=\"button\" onClick={this.handleCancel}>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t</p>}\n\t\t\t<p class=\"buttonbar\">\n\t\t\t\t{isVisible('mute') && (this.state.showMuteInput ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\t\tReason: {}\n\t\t\t\t\t\t\t<input name=\"mutereason\" class=\"textbox autofocus\" placeholder=\"Mute reason (optional)\" />\n\t\t\t\t\t\t</label> {} <br />\n\t\t\t\t\t\t<button class=\"button\" onClick={this.muteUser} value=\"7min\">For 7 Mins</button> {}\n\t\t\t\t\t\t<button class=\"button\" onClick={this.muteUser} value=\"1hr\">For 1 Hour</button> {}\n\t\t\t\t\t\t<button class=\"button\" onClick={this.handleCancel}> Cancel</button>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<button class=\"button\" onClick={this.handleMute}>\n\t\t\t\t\t\t<i class=\"fa fa-hourglass-half\" aria-hidden></i> Mute\n\t\t\t\t\t</button>\n\t\t\t\t))} {}\n\t\t\t\t{isVisible('ban') && (this.state.showBanInput ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\t\tReason: {}\n\t\t\t\t\t\t\t<input name=\"banreason\" class=\"textbox autofocus\" placeholder=\"Ban reason (optional)\" />\n\t\t\t\t\t\t</label><br />\n\t\t\t\t\t\t<button class=\"button\" onClick={this.banUser} value=\"2d\">For 2 Days</button> {}\n\t\t\t\t\t\t<button class=\"button\" onClick={this.banUser} value=\"1wk\">For 1 Week</button> {}\n\t\t\t\t\t\t<button class=\"button\" onClick={this.handleCancel}>Cancel</button>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<button class=\"button\" onClick={this.handleBan}>\n\t\t\t\t\t\t<i class=\"fa fa-gavel\" aria-hidden></i> Ban\n\t\t\t\t\t</button>\n\t\t\t\t))} {}\n\t\t\t\t{isVisible('lock') && (this.state.showLockInput ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\t\tReason: {}\n\t\t\t\t\t\t\t<input name=\"lockreason\" class=\"textbox autofocus\" placeholder=\"Lock reason (optional)\" />\n\t\t\t\t\t\t</label><br />\n\t\t\t\t\t\t<button class=\"button\" onClick={this.lockUser} value=\"2d\">For 2 Days</button> {}\n\t\t\t\t\t\t<button class=\"button\" onClick={this.lockUser} value=\"1wk\">For 1 Week</button> {}\n\t\t\t\t\t\t<button class=\"button\" onClick={this.lockUser} value=\"nmlk\">Namelock</button> {}\n\t\t\t\t\t\t<button class=\"button\" onClick={this.handleCancel}>Cancel</button>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<button class=\"button\" onClick={this.handleLock}>\n\t\t\t\t\t\t<i class=\"fa fa-lock\" aria-hidden></i> Lock/Namelock\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t</p>\n\t\t</div></PSPanelWrapper>;\n\t}\n}\n\nclass UserListPanel extends PSRoomPanel {\n\tstatic readonly id = 'userlist';\n\tstatic readonly routes = ['userlist'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst parentRoom = room.getParent() as ChatRoom;\n\t\tif (parentRoom.type !== 'chat' && parentRoom.type !== 'battle') {\n\t\t\tthrow new Error(`UserListPanel: ${room.id} is not a chat room`);\n\t\t}\n\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\n\t\t\t<ChatUserList room={parentRoom} static />\n\t\t</div></PSPanelWrapper>;\n\t}\n}\n\nclass VolumePanel extends PSRoomPanel {\n\tstatic readonly id = 'volume';\n\tstatic readonly routes = ['volume'];\n\tstatic readonly location = 'popup';\n\n\tsetVolume = (e: Event) => {\n\t\tconst slider = e.currentTarget as HTMLInputElement;\n\t\tPS.prefs.set(slider.name as 'effectvolume', Number(slider.value));\n\t\tthis.forceUpdate();\n\t};\n\tsetMute = (e: Event) => {\n\t\tconst checkbox = e.currentTarget as HTMLInputElement;\n\t\tPS.prefs.set('mute', !!checkbox.checked);\n\t\tPS.update();\n\t};\n\toverride componentDidMount() {\n\t\tsuper.componentDidMount();\n\t\tthis.subscriptions.push(PS.prefs.subscribe(() => {\n\t\t\tthis.forceUpdate();\n\t\t}));\n\t}\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\treturn <PSPanelWrapper room={room}><div class=\"pad\">\n\t\t\t<h3>Volume</h3>\n\t\t\t<p class=\"volume\">\n\t\t\t\t<label class=\"optlabel\">\n\t\t\t\t\tEffects: <span class=\"value\">{!PS.prefs.mute && PS.prefs.effectvolume ? `${PS.prefs.effectvolume}%` : `-`}</span>\n\t\t\t\t</label>\n\t\t\t\t{PS.prefs.mute ?\n\t\t\t\t\t<em>(muted)</em> :\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"effectvolume\" value={PS.prefs.effectvolume}\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\n\t\t\t\t\t/>}\n\t\t\t</p>\n\t\t\t<p class=\"volume\">\n\t\t\t\t<label class=\"optlabel\">\n\t\t\t\t\tMusic: <span class=\"value\">{!PS.prefs.mute && PS.prefs.musicvolume ? `${PS.prefs.musicvolume}%` : `-`}</span>\n\t\t\t\t</label>\n\t\t\t\t{PS.prefs.mute ?\n\t\t\t\t\t<em>(muted)</em> :\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"musicvolume\" value={PS.prefs.musicvolume}\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\n\t\t\t\t\t/>}\n\t\t\t</p>\n\t\t\t<p class=\"volume\">\n\t\t\t\t<label class=\"optlabel\">\n\t\t\t\t\tNotifications: {}\n\t\t\t\t\t<span class=\"value\">{!PS.prefs.mute && PS.prefs.notifvolume ? `${PS.prefs.notifvolume}%` : `-`}</span>\n\t\t\t\t</label>\n\t\t\t\t{PS.prefs.mute ?\n\t\t\t\t\t<em>(muted)</em> :\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"notifvolume\" value={PS.prefs.notifvolume}\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\n\t\t\t\t\t/>}\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" name=\"mute\" checked={PS.prefs.mute} onChange={this.setMute} /> Mute all\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t</div></PSPanelWrapper>;\n\t}\n}\n\nclass OptionsPanel extends PSRoomPanel {\n\tstatic readonly id = 'options';\n\tstatic readonly routes = ['options'];\n\tstatic readonly location = 'semimodal-popup';\n\tdeclare state: { showStatusInput?: boolean, showStatusUpdated?: boolean };\n\n\toverride componentDidMount() {\n\t\tsuper.componentDidMount();\n\t\tthis.subscribeTo(PS.user);\n\t}\n\tsetTheme = (e: Event) => {\n\t\tconst theme = (e.currentTarget as HTMLSelectElement).value as 'light' | 'dark' | 'system';\n\t\tPS.prefs.set('theme', theme);\n\t\tthis.forceUpdate();\n\t};\n\tsetLayout = (e: Event) => {\n\t\tconst layout = (e.currentTarget as HTMLSelectElement).value;\n\t\tswitch (layout) {\n\t\tcase '':\n\t\t\tPS.prefs.set('onepanel', null);\n\t\t\tPS.rightPanel ||= PS.rooms['rooms'] || null;\n\t\t\tbreak;\n\t\tcase 'onepanel':\n\t\t\tPS.prefs.set('onepanel', true);\n\t\t\tbreak;\n\t\tcase 'vertical':\n\t\t\tPS.prefs.set('onepanel', 'vertical');\n\t\t\tbreak;\n\t\t}\n\t\tPS.update();\n\t};\n\tsetChatroomTimestamp = (ev: Event) => {\n\t\tconst timestamp = (ev.currentTarget as HTMLSelectElement).value as TimestampOptions;\n\t\tPS.prefs.set('timestamps', { ...PS.prefs.timestamps, chatrooms: timestamp || undefined });\n\t};\n\tsetPMsTimestamp = (ev: Event) => {\n\t\tconst timestamp = (ev.currentTarget as HTMLSelectElement).value as TimestampOptions;\n\t\tPS.prefs.set('timestamps', { ...PS.prefs.timestamps, pms: timestamp || undefined });\n\t};\n\n\thandleShowStatusInput = (ev: Event) => {\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t\tthis.setState({ showStatusInput: !this.state.showStatusInput });\n\t};\n\n\thandleOnChange = (ev: Event) => {\n\t\tlet elem = ev.currentTarget as HTMLInputElement;\n\t\tlet setting = elem.name;\n\t\tlet value = elem.checked;\n\t\tswitch (setting) {\n\t\tcase 'blockPMs': {\n\t\t\tPS.prefs.set(\"blockPMs\", value);\n\t\t\tPS.send(value ? '/blockpms' : '/unblockpms');\n\t\t\tbreak;\n\t\t}\n\t\tcase 'blockChallenges': {\n\t\t\tPS.prefs.set(\"blockChallenges\", value);\n\t\t\tPS.send(value ? '/blockchallenges' : '/unblockchallenges');\n\t\t\tbreak;\n\t\t}\n\t\tcase 'bwgfx': {\n\t\t\tPS.prefs.set('bwgfx', value);\n\t\t\tDex.loadSpriteData(value || PS.prefs.noanim ? 'bw' : 'xy');\n\t\t\tbreak;\n\t\t}\n\t\tcase 'language': {\n\t\t\tPS.prefs.set(setting, elem.value);\n\t\t\tPS.send(`/language ${elem.value}`);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'tournaments': {\n\t\t\tPS.prefs.set(setting, !elem.value ? null : elem.value as 'hide' | 'notify');\n\t\t\tbreak;\n\t\t}\n\t\tcase 'refreshprompt':\n\t\tcase 'noanim':\n\t\tcase 'nopastgens':\n\t\tcase 'noselfhighlight':\n\t\tcase 'leavePopupRoom':\n\t\tcase 'inchatpm':\n\t\t\tPS.prefs.set(setting, value);\n\t\t\tbreak;\n\t\t}\n\t};\n\n\teditStatus = (ev: Event) => {\n\t\tconst statusInput = this.base!.querySelector<HTMLInputElement>('input[name=statustext]');\n\t\tPS.send(statusInput?.value?.length ? `/status ${statusInput.value}` : `/clearstatus`);\n\t\tthis.setState({ showStatusUpdated: true, showStatusInput: false });\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\treturn <PSPanelWrapper room={room}><div class=\"pad\">\n\t\t\t<p>\n\t\t\t\t<img\n\t\t\t\t\tclass=\"trainersprite yours\" width=\"40\" height=\"40\" style={{ verticalAlign: 'middle' }}\n\t\t\t\t\tsrc={Dex.resolveAvatar(`${PS.user.avatar}`)} data-href=\"avatars\"\n\t\t\t\t/> {}\n\t\t\t\t<strong>{PS.user.name}</strong>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<button class=\"button\" data-href=\"avatars\"> Avatar...</button>\n\t\t\t</p>\n\n\t\t\t{this.state.showStatusInput ? (\n\t\t\t\t<p>\n\t\t\t\t\t<input name=\"statustext\" />\n\t\t\t\t\t<button class=\"button\" onClick={this.editStatus}><i class=\"fa fa-pencil\" aria-hidden></i></button>\n\t\t\t\t</p>\n\t\t\t) : (\n\t\t\t\t<p>\n\t\t\t\t\t<button class=\"button\" onClick={this.handleShowStatusInput} disabled={this.state.showStatusUpdated}>\n\t\t\t\t\t\t{this.state.showStatusUpdated ? 'Status Updated' : 'Status...'}</button>\n\t\t\t\t</p>\n\t\t\t)}\n\n\t\t\t{PS.user.named && (PS.user.registered?.userid === PS.user.userid ?\n\t\t\t\t<button className=\"button\" data-href=\"changepassword\">Password...</button> :\n\t\t\t\t<button className=\"button\" data-href=\"register\">Register</button>)}\n\n\t\t\t<hr />\n\t\t\t<h3>Graphics</h3>\n\t\t\t<p>\n\t\t\t\t<label class=\"optlabel\">Theme: <select name=\"theme\" class=\"button\" onChange={this.setTheme}>\n\t\t\t\t\t<option value=\"light\" selected={PS.prefs.theme === 'light'}>Light</option>\n\t\t\t\t\t<option value=\"dark\" selected={PS.prefs.theme === 'dark'}>Dark</option>\n\t\t\t\t\t<option value=\"system\" selected={PS.prefs.theme === 'system'}>Match system theme</option>\n\t\t\t\t</select></label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"optlabel\">Layout: <select name=\"layout\" class=\"button\" onChange={this.setLayout}>\n\t\t\t\t\t<option value=\"\" selected={!PS.prefs.onepanel}>Two panels (if wide enough)</option>\n\t\t\t\t\t<option value=\"onepanel\" selected={PS.prefs.onepanel === true}>Single panel</option>\n\t\t\t\t\t<option value=\"vertical\" selected={PS.prefs.onepanel === 'vertical'}>Vertical tabs</option>\n\t\t\t\t</select></label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"optlabel\">\n\t\t\t\t\tBackground: <button class=\"button\" data-href=\"changebackground\">\n\t\t\t\t\t\tChange Background\n\t\t\t\t\t</button>\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\"> <input\n\t\t\t\t\tname=\"noanim\" checked={PS.prefs.noanim || false} type=\"checkbox\" onChange={this.handleOnChange}\n\t\t\t\t/> Disable animations</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\"><input\n\t\t\t\t\tname=\"bwgfx\" checked={PS.prefs.bwgfx || false} type=\"checkbox\" onChange={this.handleOnChange}\n\t\t\t\t/>  Use 2D sprites instead of 3D models</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\"><input\n\t\t\t\t\tname=\"nopastgens\" checked={PS.prefs.nopastgens || false} type=\"checkbox\" onChange={this.handleOnChange}\n\t\t\t\t/> Use modern sprites for past generations</label>\n\t\t\t</p>\n\t\t\t<hr />\n\t\t\t<h3>Chat</h3>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\"><input\n\t\t\t\t\tname=\"blockPMs\" checked={PS.prefs.blockPMs || false} type=\"checkbox\" onChange={this.handleOnChange}\n\t\t\t\t/> Block PMs</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\"><input\n\t\t\t\t\tname=\"blockChallenges\" checked={PS.prefs.blockChallenges || false} type=\"checkbox\" onChange={this.handleOnChange}\n\t\t\t\t/> Block challenges</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\"><input\n\t\t\t\t\tname=\"inchatpm\" checked={PS.prefs.inchatpm || false} type=\"checkbox\" onChange={this.handleOnChange}\n\t\t\t\t/> Show PMs in chatrooms</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\"><input\n\t\t\t\t\tname=\"noselfhighlight\" checked={PS.prefs.noselfhighlight || false} type=\"checkbox\" onChange={this.handleOnChange}\n\t\t\t\t/> Do not highlight when your name is said in chat</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\"><input\n\t\t\t\t\tname=\"leavePopupRoom\" checked={PS.prefs.leavePopupRoom || false} type=\"checkbox\" onChange={this.handleOnChange}\n\t\t\t\t/> Confirm before leaving a room</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\"><input\n\t\t\t\t\tname=\"refreshprompt\" checked={PS.prefs.refreshprompt || false} type=\"checkbox\" onChange={this.handleOnChange}\n\t\t\t\t/> Confirm before refreshing</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"optlabel\">\n\t\t\t\t\tLanguage: {}\n\t\t\t\t\t<select name=\"language\" onChange={this.handleOnChange} class=\"button\">\n\t\t\t\t\t\t<option value=\"german\" selected={PS.prefs.language === \"german\"}>Deutsch</option>\n\t\t\t\t\t\t<option value=\"english\" selected={PS.prefs.language === \"english\"}>English</option>\n\t\t\t\t\t\t<option value=\"spanish\" selected={PS.prefs.language === \"spanish\"}>Español</option>\n\t\t\t\t\t\t<option value=\"french\" selected={PS.prefs.language === \"french\"}>Français</option>\n\t\t\t\t\t\t<option value=\"italian\" selected={PS.prefs.language === \"italian\"}>Italiano</option>\n\t\t\t\t\t\t<option value=\"dutch\" selected={PS.prefs.language === \"dutch\"}>Nederlands</option>\n\t\t\t\t\t\t<option value=\"portuguese\" selected={PS.prefs.language === \"portuguese\"}>Português</option>\n\t\t\t\t\t\t<option value=\"turkish\" selected={PS.prefs.language === \"turkish\"}>Türkçe</option>\n\t\t\t\t\t\t<option value=\"hindi\" selected={PS.prefs.language === \"hindi\"}>हिंदी</option>\n\t\t\t\t\t\t<option value=\"japanese\" selected={PS.prefs.language === \"japanese\"}>日本語</option>\n\t\t\t\t\t\t<option value=\"simplifiedchinese\" selected={PS.prefs.language === \"simplifiedchinese\"}>简体中文</option>\n\t\t\t\t\t\t<option value=\"traditionalchinese\" selected={PS.prefs.language === \"traditionalchinese\"}>中文</option>\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"optlabel\">\n\t\t\t\t\tTournaments: <select name=\"tournaments\" class=\"button\" onChange={this.handleOnChange}>\n\t\t\t\t\t\t<option value=\"\" selected={!PS.prefs.tournaments}>Notify when joined</option>\n\t\t\t\t\t\t<option value=\"notify\" selected={PS.prefs.tournaments === \"notify\"}>Always notify</option>\n\t\t\t\t\t\t<option value=\"hide\" selected={PS.prefs.tournaments === \"hide\"}>Hide</option>\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"optlabel\">Timestamps: <select name=\"layout\" class=\"button\" onChange={this.setChatroomTimestamp}>\n\t\t\t\t\t<option value=\"\" selected={!PS.prefs.timestamps.chatrooms}>Off</option>\n\t\t\t\t\t<option value=\"minutes\" selected={PS.prefs.timestamps.chatrooms === \"minutes\"}>[HH:MM]</option>\n\t\t\t\t\t<option value=\"seconds\" selected={PS.prefs.timestamps.chatrooms === \"seconds\"}>[HH:MM:SS]</option>\n\t\t\t\t</select></label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"optlabel\">Timestamps in DMs: <select name=\"layout\" class=\"button\" onChange={this.setPMsTimestamp}>\n\t\t\t\t\t<option value=\"\" selected={!PS.prefs.timestamps.pms}>Off</option>\n\t\t\t\t\t<option value=\"minutes\" selected={PS.prefs.timestamps.pms === \"minutes\"}>[HH:MM]</option>\n\t\t\t\t\t<option value=\"seconds\" selected={PS.prefs.timestamps.pms === \"seconds\"}>[HH:MM:SS]</option>\n\t\t\t\t</select></label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"optlabel\">\n\t\t\t\t\tChat preferences: {}\n\t\t\t\t\t<button class=\"button\" data-href=\"chatformatting\">Text formatting...</button>\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<hr />\n\t\t\t{PS.user.named ? <p class=\"buttonbar\" style=\"text-align: right\">\n\t\t\t\t<button class=\"button\" data-href=\"login\"><i class=\"fa fa-pencil\" aria-hidden></i> Change name</button> {}\n\t\t\t\t<button class=\"button\" data-cmd=\"/logout\"><i class=\"fa fa-power-off\" aria-hidden></i> Log out</button>\n\t\t\t</p> : <p class=\"buttonbar\" style=\"text-align: right\">\n\t\t\t\t<button class=\"button\" data-href=\"login\"><i class=\"fa fa-pencil\" aria-hidden></i> Choose name</button>\n\t\t\t</p> }\n\t\t</div></PSPanelWrapper>;\n\t}\n}\n\nclass GooglePasswordBox extends preact.Component<{ name: string }> {\n\toverride componentDidMount() {\n\t\twindow.gapiCallback = (response: any) => {\n\t\t\tPS.user.changeNameWithPassword(this.props.name, response.credential, { needsGoogle: true });\n\t\t};\n\n\t\tPS.user.gapiLoaded = true;\n\t\tconst script = document.createElement('script');\n\t\tscript.async = true;\n\t\tscript.src = 'https://accounts.google.com/gsi/client';\n\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\n\t}\n\toverride render() {\n\t\treturn <div class=\"google-password-box\">\n\t\t\t<div\n\t\t\t\tid=\"g_id_onload\" data-client_id=\"912270888098-jjnre816lsuhc5clj3vbcn4o2q7p4qvk.apps.googleusercontent.com\"\n\t\t\t\tdata-context=\"signin\" data-ux_mode=\"popup\" data-callback=\"gapiCallback\" data-auto_prompt=\"false\"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass=\"g_id_signin\" data-type=\"standard\" data-shape=\"pill\" data-theme=\"filled_blue\" data-text=\"continue_with\"\n\t\t\t\tdata-size=\"large\" data-logo_alignment=\"left\" data-auto_select=\"true\" data-itp_support=\"true\"\n\t\t\t\tstyle=\"width:fit-content;margin:0 auto\"\n\t\t\t>[loading Google log-in button]</div>\n\t\t</div>;\n\t}\n}\n\nclass LoginPanel extends PSRoomPanel {\n\tstatic readonly id = 'login';\n\tstatic readonly routes = ['login'];\n\tstatic readonly location = 'semimodal-popup';\n\tdeclare state: { passwordShown?: boolean };\n\n\toverride componentDidMount() {\n\t\tsuper.componentDidMount();\n\t\tthis.subscriptions.push(PS.user.subscribe(args => {\n\t\t\tif (args) {\n\t\t\t\tif (args.success) {\n\t\t\t\t\tthis.close();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.props.room.args = args;\n\t\t\t\tsetTimeout(() => this.focus(), 1);\n\t\t\t}\n\t\t\tthis.forceUpdate();\n\t\t}));\n\t}\n\tgetUsername() {\n\t\tconst loginName = PS.user.loggingIn || this.props.room.args?.name as string;\n\t\tif (loginName) return loginName;\n\n\t\tconst input = this.base?.querySelector<HTMLInputElement>('input[name=username]');\n\t\tif (input && !input.disabled) {\n\t\t\treturn input.value;\n\t\t}\n\t\treturn PS.user.named ? PS.user.name : '';\n\t}\n\thandleSubmit = (ev: Event) => {\n\t\tev.preventDefault();\n\t\tconst passwordBox = this.base!.querySelector<HTMLInputElement>('input[name=password]');\n\t\tif (passwordBox) {\n\t\t\tPS.user.changeNameWithPassword(this.getUsername(), passwordBox.value);\n\t\t} else {\n\t\t\tPS.user.changeName(this.getUsername());\n\t\t}\n\t};\n\tupdate = () => {\n\t\tthis.forceUpdate();\n\t};\n\toverride focus() {\n\t\tconst passwordBox = this.base!.querySelector<HTMLInputElement>('input[name=password]');\n\t\tconst usernameBox = this.base!.querySelector<HTMLInputElement>('input[name=username]');\n\t\t(passwordBox || usernameBox)?.select();\n\t}\n\treset = (ev: Event) => {\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t\tthis.props.room.args = null;\n\t\tthis.forceUpdate();\n\t};\n\thandleShowPassword = (ev: Event) => {\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t\tthis.setState({ passwordShown: !this.state.passwordShown });\n\t};\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst loginState = room.args as PSLoginState;\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\n\t\t\t<h3>Log in</h3>\n\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t{loginState?.error && <p class=\"error\">{loginState.error}</p>}\n\t\t\t\t<p><label class=\"label\">\n\t\t\t\t\tUsername: <small class=\"preview\" style={`color:${BattleLog.usernameColor(toID(this.getUsername()))}`}>(color)</small>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"textbox\" type=\"text\" name=\"username\"\n\t\t\t\t\t\tonInput={this.update} onChange={this.update} autocomplete=\"username\"\n\t\t\t\t\t\tvalue={this.getUsername()} disabled={!!PS.user.loggingIn || !!loginState?.name}\n\t\t\t\t\t/>\n\t\t\t\t</label></p>\n\t\t\t\t{PS.user.named && !loginState && <p>\n\t\t\t\t\t<small>(Others will be able to see your name change. To change name privately, use \"Log out\")</small>\n\t\t\t\t</p>}\n\t\t\t\t{loginState?.needsPassword && <p>\n\t\t\t\t\t<i class=\"fa fa-level-up fa-rotate-90\" aria-hidden></i> <strong>if you registered this name:</strong>\n\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\tPassword: {}\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"textbox\" type={this.state.passwordShown ? 'text' : 'password'} name=\"password\"\n\t\t\t\t\t\t\tautocomplete=\"current-password\" style=\"width:173px\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\" onClick={this.handleShowPassword} aria-label=\"Show password\"\n\t\t\t\t\t\t\tclass=\"button\" style=\"float:right;margin:-21px 0 10px;padding: 2px 6px\"\n\t\t\t\t\t\t><i class=\"fa fa-eye\" aria-hidden></i></button>\n\t\t\t\t\t</label>\n\t\t\t\t</p>}\n\t\t\t\t{loginState?.needsGoogle && <>\n\t\t\t\t\t<p><i class=\"fa fa-level-up fa-rotate-90\" aria-hidden></i> <strong>if you registered this name:</strong></p>\n\t\t\t\t\t<p><GooglePasswordBox name={this.getUsername()} /></p>\n\t\t\t\t</>}\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t{PS.user.loggingIn ? (\n\t\t\t\t\t\t<button disabled class=\"cur\">Logging in...</button>\n\t\t\t\t\t) : loginState?.needsPassword ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Log in</strong></button> {}\n\t\t\t\t\t\t\t<button type=\"button\" onClick={this.reset} class=\"button\">Cancel</button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : loginState?.needsGoogle ? (\n\t\t\t\t\t\t<button type=\"button\" onClick={this.reset} class=\"button\">Cancel</button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Choose name</strong></button> {}\n\t\t\t\t\t\t\t<button type=\"button\" name=\"closeRoom\" class=\"button\">Cancel</button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)} {}\n\t\t\t\t</p>\n\t\t\t\t{loginState?.name && <div>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<i class=\"fa fa-level-up fa-rotate-90\" aria-hidden></i> <strong>if not:</strong>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p style={{ maxWidth: '210px', margin: '0 auto' }}>\n\t\t\t\t\t\tThis is someone else's account. Sorry.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t\t<button class=\"button\" onClick={this.reset}>Try another name</button>\n\t\t\t\t\t</p>\n\t\t\t\t</div>}\n\t\t\t</form>\n\t\t</div></PSPanelWrapper>;\n\t}\n}\n\nclass AvatarsPanel extends PSRoomPanel {\n\tstatic readonly id = 'avatars';\n\tstatic readonly routes = ['avatars'];\n\tstatic readonly location = 'semimodal-popup';\n\n\tsetLocalAvatar = (ev: MouseEvent) => {\n\t\tev.preventDefault();\n\t\tconst id = (this.base?.querySelector('input[name=\"localavatar\"]') as HTMLInputElement | null)?.value?.trim();\n\t\tif (!id) return;\n\t\tPS.user.avatar = `#${toID(id)}`;\n\t\tPS.user.update(null);\n\t\tthis.close();\n\t};\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\n\t\tconst avatars: [number, string][] = [];\n\t\tfor (let i = 1; i <= 293; i++) {\n\t\t\tif (i === 162 || i === 168) continue;\n\t\t\tavatars.push([i, window.BattleAvatarNumbers?.[i] || `${i}`]);\n\t\t}\n\n\t\treturn <PSPanelWrapper room={room} width={1210}><div class=\"pad\">\n\t\t\t<label class=\"optlabel\"><strong>Choose an avatar or </strong>\n\t\t\t\t<button class=\"button\" data-cmd=\"/close\"> Cancel</button>\n\t\t\t</label>\n\t\t\t<div class=\"avatarlist\">\n\t\t\t\t{avatars.map(([i, avatar]) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tdata-cmd={`/closeand /avatar ${avatar}`} title={`/avatar ${avatar}`}\n\t\t\t\t\t\tclass={`option pixelated${avatar === PS.user.avatar ? ' cur' : ''}`}\n\t\t\t\t\t\tstyle={`background-position: -${((i - 1) % 16) * 80 + 1}px -${Math.floor((i - 1) / 16) * 80 + 1}px`}\n\t\t\t\t\t></button>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div style=\"clear:left\"></div>\n\t\t\t<hr />\n\t\t\t<div>\n\t\t\t\t<p><strong>Use a local image (client-only)</strong></p>\n\t\t\t\t<p class=\"message-thin\">\n\t\t\t\t\tPlace a PNG at <code>sprites/trainers-custom/&lt;id&gt;.png</code>, then enter the id below. This only changes how your client displays your avatar.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<input name=\"localavatar\" class=\"textbox\" style=\"width:220px\" placeholder=\"custom-id (e.g. myavatar)\" /> {}\n\t\t\t\t\t<button class=\"button\" onClick={this.setLocalAvatar}>Use local image</button>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<p><button class=\"button\" data-cmd=\"/close\">Cancel</button></p>\n\t\t</div></PSPanelWrapper>;\n\t}\n}\n\nclass BattleForfeitPanel extends PSRoomPanel {\n\tstatic readonly id = 'forfeit';\n\tstatic readonly routes = ['forfeitbattle'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst battleRoom = room.getParent() as BattleRoom;\n\n\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\n\t\t\t<p>Forfeiting makes you lose the battle. Are you sure?</p>\n\t\t\t<p>\n\t\t\t\t<button data-cmd=\"/closeand /inopener /closeand /forfeit\" class=\"button\"><strong>Forfeit and close</strong></button> {}\n\t\t\t\t<button data-cmd=\"/closeand /inopener /forfeit\" class=\"button\">Just forfeit</button> {}\n\t\t\t\t{!battleRoom.battle.rated && <button type=\"button\" data-href=\"replaceplayer\" class=\"button\">\n\t\t\t\t\tReplace player\n\t\t\t\t</button>} {}\n\t\t\t\t<button type=\"button\" data-cmd=\"/close\" class=\"button\">\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</p>\n\t\t</div></PSPanelWrapper>;\n\t}\n}\n\nclass ReplacePlayerPanel extends PSRoomPanel {\n\tstatic readonly id = 'replaceplayer';\n\tstatic readonly routes = ['replaceplayer'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\n\thandleReplacePlayer = (ev: Event) => {\n\t\tconst room = this.props.room;\n\t\tconst battleRoom = room.getParent()?.getParent() as BattleRoom;\n\t\tconst newPlayer = this.base?.querySelector<HTMLInputElement>(\"input[name=newplayer]\")?.value;\n\t\tif (!newPlayer?.length) return battleRoom.add(\"|error|Enter player's name\");\n\t\tif (battleRoom.battle.ended) return battleRoom.add(\"|error|Cannot replace player, battle has already ended.\");\n\t\tlet playerSlot = battleRoom.battle.p1.id === PS.user.userid ? \"p1\" : \"p2\";\n\t\tbattleRoom.send('/leavebattle');\n\t\tbattleRoom.send(`/addplayer ${newPlayer}, ${playerSlot}`);\n\t\tthis.close();\n\t\tev.preventDefault();\n\t};\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\n\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\n\t\t\t<form onSubmit={this.handleReplacePlayer}>\n\t\t\t\t<p>Replacement player's name:</p>\n\t\t\t\t<p>\n\t\t\t\t\t<input name=\"newplayer\" class=\"textbox autofocus\" />\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<button type=\"submit\" class=\"button\">\n\t\t\t\t\t\t<strong>Replace</strong>\n\t\t\t\t\t</button> {}\n\t\t\t\t\t<button type=\"button\" data-cmd=\"/close\" class=\"button\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t</form>\n\t\t</div></PSPanelWrapper>;\n\t}\n}\n\nclass ChangePasswordPanel extends PSRoomPanel {\n\tstatic readonly id = \"changepassword\";\n\tstatic readonly routes = [\"changepassword\"];\n\tstatic readonly location = \"semimodal-popup\";\n\tstatic readonly noURL = true;\n\n\tdeclare state: { errorMsg: string };\n\n\thandleChangePassword = (ev: Event) => {\n\t\tev.preventDefault();\n\t\tlet oldpassword = this.base?.querySelector<HTMLInputElement>('input[name=oldpassword]')?.value;\n\t\tlet password = this.base?.querySelector<HTMLInputElement>('input[name=password]')?.value;\n\t\tlet cpassword = this.base?.querySelector<HTMLInputElement>('input[name=cpassword]')?.value;\n\t\tif (!oldpassword?.length ||\n\t\t\t!password?.length ||\n\t\t\t!cpassword?.length) return this.setState({ errorMsg: \"All fields are required\" });\n\t\tif (password !== cpassword) return this.setState({ errorMsg: 'Passwords do not match' });\n\t\tPSLoginServer.query(\"changepassword\", {\n\t\t\toldpassword,\n\t\t\tpassword,\n\t\t\tcpassword,\n\t\t}).then(data => {\n\t\t\tif (data?.actionerror) return this.setState({ errorMsg: data?.actionerror });\n\t\t\tPS.alert(\"Your password was successfully changed!\");\n\n\t\t}).catch(err => {\n\t\t\tconsole.error(err);\n\t\t\tthis.setState({ errorMsg: err.message });\n\t\t});\n\n\t\tthis.setState({ errorMsg: '' });\n\t};\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\n\t\t\t<form onSubmit={this.handleChangePassword}>\n\t\t\t\t{ !!this.state.errorMsg?.length && <p>\n\t\t\t\t\t<b class=\"message-error\"> {this.state.errorMsg}</b>\n\t\t\t\t</p> }\n\t\t\t\t<p>Change your password:</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\tUsername: {}\n\t\t\t\t\t\t<input name=\"username\" value={PS.user.name} readOnly={true} autocomplete=\"username\" class=\"textbox disabled\" />\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\tOld password: {}\n\t\t\t\t\t\t<input name=\"oldpassword\" type=\"password\" autocomplete=\"current-password\" class=\"textbox autofocus\" />\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\tNew password: {}\n\t\t\t\t\t\t<input name=\"password\" type=\"password\" autocomplete=\"new-password\" class=\"textbox\" />\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\tNew password (confirm): {}\n\t\t\t\t\t\t<input name=\"cpassword\" type=\"password\" autocomplete=\"new-password\" class=\"textbox\" />\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t<button type=\"submit\" class=\"button\">\n\t\t\t\t\t\t<strong>Change password</strong>\n\t\t\t\t\t</button> {}\n\t\t\t\t\t<button type=\"button\" data-cmd=\"/close\" class=\"button\">Cancel</button>\n\t\t\t\t</p>\n\t\t\t</form>\n\t\t</div>\n\t\t</PSPanelWrapper>;\n\t}\n}\n\nclass RegisterPanel extends PSRoomPanel {\n\tstatic readonly id = \"register\";\n\tstatic readonly routes = [\"register\"];\n\tstatic readonly location = \"semimodal-popup\";\n\tstatic readonly noURL = true;\n\tstatic readonly rightPopup = true;\n\n\tdeclare state: { errorMsg: string };\n\n\thandleRegisterUser = (ev: Event) => {\n\t\tev.preventDefault();\n\t\tlet captcha = this.base?.querySelector<HTMLInputElement>('input[name=captcha]')?.value;\n\t\tlet password = this.base?.querySelector<HTMLInputElement>('input[name=password]')?.value;\n\t\tlet cpassword = this.base?.querySelector<HTMLInputElement>('input[name=cpassword]')?.value;\n\t\tif (!captcha?.length ||\n\t\t\t!password?.length ||\n\t\t\t!cpassword?.length) return this.setState({ errorMsg: \"All fields are required\" });\n\t\tif (password !== cpassword) return this.setState({ errorMsg: 'Passwords do not match' });\n\t\tPSLoginServer.query(\"register\", {\n\t\t\tcaptcha,\n\t\t\tpassword,\n\t\t\tcpassword,\n\t\t\tusername: PS.user.name,\n\t\t\tchallstr: PS.user.challstr,\n\t\t}).then(data => {\n\t\t\tif (data?.actionerror) this.setState({ errorMsg: data?.actionerror });\n\t\t\tif (data?.curuser?.loggedin) {\n\t\t\t\tlet name = data.curuser.username;\n\t\t\t\tPS.user.registered = { name, userid: toID(name) };\n\t\t\t\tif (data?.assertion) PS.user.handleAssertion(name, data?.assertion);\n\t\t\t\tthis.close();\n\t\t\t\tPS.alert(\"You have been successfully registered.\");\n\t\t\t}\n\t\t}).catch(err => {\n\t\t\tconsole.error(err);\n\t\t\tthis.setState({ errorMsg: err.message });\n\t\t});\n\n\t\tthis.setState({ errorMsg: '' });\n\t};\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\n\t\t\t<form onSubmit={this.handleRegisterUser}>\n\t\t\t\t{ !!this.state.errorMsg?.length && <p>\n\t\t\t\t\t<b class=\"message-error\"> {this.state.errorMsg}</b>\n\t\t\t\t</p> }\n\t\t\t\t<p>Register your account:</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\tUsername: {}\n\t\t\t\t\t\t<input name=\"name\" value={PS.user.name} readOnly={true} autocomplete=\"username\" class=\"textbox disabled\" />\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\tPassword: {}\n\t\t\t\t\t\t<input name=\"password\" type=\"password\" autocomplete=\"new-password\" class=\"textbox autofocus\" />\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\tPassword (confirm): {}\n\t\t\t\t\t\t<input name=\"cpassword\" type=\"password\" autocomplete=\"new-password\" class=\"textbox\" />\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"label\"><img\n\t\t\t\t\t\tsrc=\"https://play.pokemonshowdown.com/sprites/gen5ani/pikachu.gif\"\n\t\t\t\t\t\talt=\"An Electric-type mouse that is the mascot of the Pok&eacute;mon franchise.\"\n\t\t\t\t\t/></label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\tWhat is this pokemon? {}\n\t\t\t\t\t\t<input name=\"captcha\" class=\"textbox\" />\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Register</strong></button> {}\n\t\t\t\t\t<button type=\"button\" data-cmd=\"/close\" class=\"button\">Cancel</button>\n\t\t\t\t</p>\n\t\t\t</form>\n\n\t\t</div>\n\t\t</PSPanelWrapper>;\n\t}\n}\n\nclass BackgroundListPanel extends PSRoomPanel {\n\tstatic readonly id = 'changebackground';\n\tstatic readonly routes = ['changebackground'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\tstatic handleDrop(ev: DragEvent) {\n\t\tconst files = ev.dataTransfer?.files;\n\t\tif (files?.[0]?.type?.startsWith('image/')) {\n\t\t\t// It's an image file, try to set it as a background\n\t\t\tBackgroundListPanel.handleUploadedFiles(files);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tdeclare state: { status?: string, bgUrl?: string };\n\n\tsetBg = (ev: Event) => {\n\t\tlet curtarget = ev.currentTarget as HTMLButtonElement;\n\t\tlet bg = curtarget.value;\n\t\tif (bg === 'custom') {\n\t\t\tPSBackground.set(this.props.room.args?.bgUrl as string || '', 'custom');\n\t\t\tthis.close();\n\t\t} else {\n\t\t\tPSBackground.set('', bg);\n\t\t}\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t\tthis.forceUpdate();\n\t};\n\n\tstatic handleUploadedFiles(files: FileList | null | undefined, skipConfirm?: boolean) {\n\t\tif (!files?.[0]) return;\n\n\t\tconst file = files[0];\n\t\tconst reader = new FileReader();\n\n\t\treader.onload = () => {\n\t\t\tconst bgUrl = reader.result as string;\n\t\t\tif (bgUrl.length > 4200000) {\n\t\t\t\tPS.join('changebackground' as RoomID, {\n\t\t\t\t\targs: { error: `Image is too large and can't be saved. It should be under 3.5MB or so.` },\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (skipConfirm) {\n\t\t\t\tPSBackground.set(bgUrl, 'custom');\n\t\t\t} else {\n\t\t\t\tPS.join('changebackground' as RoomID, {\n\t\t\t\t\targs: { bgUrl },\n\t\t\t\t});\n\t\t\t}\n\t\t\tPS.rooms['changebackground']?.update(null);\n\t\t};\n\n\t\treader.onerror = () => {\n\t\t\tPS.join('changebackground' as RoomID, {\n\t\t\t\targs: { error: \"Failed to load background image.\" },\n\t\t\t});\n\t\t};\n\t\treader.readAsDataURL(file);\n\t}\n\n\tuploadBg = (ev: Event) => {\n\t\tthis.setState({ status: undefined });\n\t\tconst input = this.base?.querySelector<HTMLInputElement>('input[name=bgfile]');\n\t\tBackgroundListPanel.handleUploadedFiles(input?.files, true);\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\n\trenderUpload() {\n\t\tconst room = this.props.room;\n\t\tif (room.args?.error) {\n\t\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\n\t\t\t\t<p class=\"error\">{room.args.error}</p>\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t<button data-cmd=\"/close\" class=\"button\"><strong>Done</strong></button>\n\t\t\t\t</p>\n\t\t\t</div></PSPanelWrapper>;\n\t\t}\n\n\t\tif (room.args?.bgUrl) {\n\t\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\n\t\t\t\t<p>\n\t\t\t\t\t<img src={room.args.bgUrl as string} style=\"display:block;margin:auto;max-width:90%;max-height:500px\" />\n\t\t\t\t</p>\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t<button onClick={this.setBg} value=\"custom\" class=\"button\"><strong>Set as background</strong></button> {}\n\t\t\t\t\t<button data-cmd=\"/close\" class=\"button\">Cancel</button>\n\t\t\t\t</p>\n\t\t\t</div></PSPanelWrapper>;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst option = (val: string) => val === PSBackground.id ? 'option cur' : 'option';\n\t\treturn this.renderUpload() || <PSPanelWrapper room={room} width={480}><div class=\"pad\">\n\t\t\t<p><strong>Default</strong></p>\n\t\t\t<div class=\"bglist\">\n\t\t\t\t<button onClick={this.setBg} value=\"\" class={option('')}>\n\t\t\t\t\t<strong\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\tbackground: #888888;\n\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\tpadding: 16px 18px;\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\tfont-size: 12pt;\n\t\t\t\t\t\"\n\t\t\t\t\t>Random</strong>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div style=\"clear: left\"></div>\n\t\t\t<p><strong>Official</strong></p>\n\t\t\t<div class=\"bglist\">\n\t\t\t\t<button onClick={this.setBg} value=\"charizards\" class={option('charizards')}>\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -0px\"></span>{}\n\t\t\t\t\tCharizards\n\t\t\t\t</button>\n\t\t\t\t<button onClick={this.setBg} value=\"horizon\" class={option('horizon')}>\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -90px\"></span>{}\n\t\t\t\t\tHorizon\n\t\t\t\t</button>\n\t\t\t\t<button onClick={this.setBg} value=\"waterfall\" class={option('waterfall')}>\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -180px\"></span>{}\n\t\t\t\t\tWaterfall\n\t\t\t\t</button>\n\t\t\t\t<button onClick={this.setBg} value=\"ocean\" class={option('ocean')}>\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -270px\"></span>{}\n\t\t\t\t\tOcean\n\t\t\t\t</button>\n\t\t\t\t<button onClick={this.setBg} value=\"shaymin\" class={option('shaymin')}>\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -360px\"></span>{}\n\t\t\t\t\tShaymin\n\t\t\t\t</button>\n\t\t\t\t<button onClick={this.setBg} value=\"solidblue\" class={option('solidblue')}>\n\t\t\t\t\t<span class=\"bg\" style=\"background: #344b6c\"></span>{}\n\t\t\t\t\tSolid blue\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div style=\"clear: left\"></div>\n\t\t\t<p><strong>Custom</strong></p>\n\t\t\t<p>\n\t\t\t\tUpload:\n\t\t\t</p>\n\t\t\t<p><input type=\"file\" accept=\"image/*\" name=\"bgfile\" onChange={this.uploadBg} /></p>\n\t\t\t{!!this.state.status && <p class=\"error\">{this.state.status}</p>}\n\t\t\t<p class=\"buttonbar\">\n\t\t\t\t<button data-cmd=\"/close\" class=\"button\"><strong>Done</strong></button>\n\t\t\t</p>\n\t\t</div>\n\t\t</PSPanelWrapper>;\n\t}\n}\n\nclass ChatFormattingPanel extends PSRoomPanel {\n\tstatic readonly id = 'chatformatting';\n\tstatic readonly routes = ['chatformatting'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\n\thandleOnChange = (ev: Event) => {\n\t\tconst setting = \"hide\" + (ev.currentTarget as HTMLInputElement).name;\n\t\tconst value = (ev.currentTarget as HTMLInputElement).checked;\n\t\tlet curPref = PS.prefs.chatformatting;\n\t\tcurPref[setting] = value;\n\t\tPS.prefs.set(\"chatformatting\", curPref);\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t};\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst ctrl = PSView.isMac ? 'Cmd' : 'Ctrl';\n\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\n\t\t\t<p>Usable formatting:</p>\n\t\t\t<p>**<strong>bold</strong>** (<kbd>{ctrl}</kbd>+<kbd>B</kbd>)</p>\n\t\t\t<p>__<em>italics</em>__ (<kbd>{ctrl}</kbd>+<kbd>I</kbd>)</p>\n\t\t\t<p>``<code>code formatting</code>`` (<kbd>Ctrl</kbd>+<kbd>`</kbd>)</p>\n\t\t\t<p>~~<s>strikethrough</s>~~</p>\n\t\t\t<p>^^<sup>superscript</sup>^^</p>\n\t\t\t<p>\\\\<sub>subscript</sub>\\\\</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={this.handleOnChange}\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"greentext\"\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hidegreentext}\n\t\t\t\t\t/> Suppress <span class=\"greentext\">&gt;greentext</span>\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={this.handleOnChange}\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"me\"\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hideme}\n\n\t\t\t\t\t/> Suppress <code>/me</code> <em>action formatting</em>\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={this.handleOnChange}\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"spoiler\"\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hidespoiler}\n\t\t\t\t\t/> Auto-show spoilers: <span class=\"spoiler\">these things</span>\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={this.handleOnChange}\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"links\"\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hidelinks}\n\t\t\t\t\t/> Make [[clickable links]] unclickable\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={this.handleOnChange}\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"interstice\"\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hideinterstice}\n\t\t\t\t\t/> Don't warn for untrusted links\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p><button data-cmd=\"/close\" class=\"button\">Done</button></p>\n\t\t</div>\n\t\t</PSPanelWrapper>;\n\t}\n}\n\nclass LeaveRoomPanel extends PSRoomPanel {\n\tstatic readonly id = 'confirmleaveroom';\n\tstatic readonly routes = ['confirmleaveroom'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst parentRoomid = room.parentRoomid!;\n\n\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\n\t\t\t<p>Close <code>{parentRoomid || \"ERROR\"}</code>?</p>\n\t\t\t<p class=\"buttonbar\">\n\t\t\t\t<button data-cmd={`/closeand /close ${parentRoomid}`} class=\"button autofocus\">\n\t\t\t\t\t<strong>Close Room</strong>\n\t\t\t\t</button> {}\n\t\t\t\t<button data-cmd=\"/close\" class=\"button\">\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</p>\n\t\t</div></PSPanelWrapper>;\n\t}\n}\nclass BattleOptionsPanel extends PSRoomPanel {\n\tstatic readonly id = 'battleoptions';\n\tstatic readonly routes = ['battleoptions'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\n\thandleHardcoreMode = (ev: Event) => {\n\t\tconst mode = (ev.currentTarget as HTMLInputElement).checked;\n\t\tconst room = this.getBattleRoom();\n\t\tif (!room) return this.close();\n\n\t\troom.battle.setHardcoreMode(mode);\n\t\tif (mode) {\n\t\t\troom.add(`||Hardcore mode ON: Information not available in-game is now hidden.`);\n\t\t} else {\n\t\t\troom.add(`||Hardcore mode OFF: Information not available in-game is now shown.`);\n\t\t}\n\t\troom.update(null);\n\t};\n\thandleIgnoreSpectators = (ev: Event | boolean) => {\n\t\tconst value = typeof ev === \"object\" ?\n\t\t\t(ev.currentTarget as HTMLInputElement).checked :\n\t\t\tev;\n\t\tconst room = this.getBattleRoom();\n\t\tif (!room) return this.close();\n\n\t\troom.battle.ignoreSpects = value;\n\t\troom.add(`||Spectators ${room.battle.ignoreSpects ? '' : 'no longer '}ignored.`);\n\t\tconst chats = document.querySelectorAll<HTMLElement>('.battle-log .chat');\n\t\tconst displaySetting = room.battle.ignoreSpects ? 'none' : '';\n\t\tfor (const chat of chats) {\n\t\t\tconst small = chat.querySelector('small');\n\t\t\tif (!small) continue;\n\t\t\tconst text = small.innerText;\n\t\t\tconst isPlayerChat = text.includes('\\u2606') || text.includes('\\u2605');\n\t\t\tif (!isPlayerChat) {\n\t\t\t\tchat.style.display = displaySetting;\n\t\t\t}\n\t\t}\n\t\troom.battle.scene.log.updateScroll();\n\t};\n\thandleIgnoreOpponent = (ev: Event | boolean) => {\n\t\tconst value = typeof ev === \"object\" ?\n\t\t\t(ev.currentTarget as HTMLInputElement).checked :\n\t\t\tev;\n\t\tconst room = this.getBattleRoom();\n\t\tif (!room) return this.close();\n\n\t\troom.battle.ignoreOpponent = value;\n\t\troom.battle.resetToCurrentTurn();\n\t};\n\thandleIgnoreNicks = (ev: Event | boolean) => {\n\t\tconst value = typeof ev === \"object\" ?\n\t\t\t(ev.currentTarget as HTMLInputElement).checked :\n\t\t\tev;\n\t\tconst room = this.getBattleRoom();\n\t\tif (!room) return this.close();\n\n\t\troom.battle.ignoreNicks = value;\n\t\troom.battle.resetToCurrentTurn();\n\t};\n\thandleAllSettings = (ev: Event) => {\n\t\tconst setting = (ev.currentTarget as HTMLInputElement).name;\n\t\tconst value = (ev.currentTarget as HTMLInputElement).checked;\n\t\tconst room = this.getBattleRoom();\n\n\t\tswitch (setting) {\n\t\tcase 'autotimer': {\n\t\t\tPS.prefs.set('autotimer', value);\n\t\t\tif (value) {\n\t\t\t\troom?.send('/timer on');\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase 'ignoreopp': {\n\t\t\tPS.prefs.set('ignoreopp', value);\n\t\t\tthis.handleIgnoreOpponent(value);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'ignorespects': {\n\t\t\tPS.prefs.set('ignorespects', value);\n\t\t\tthis.handleIgnoreSpectators(value);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'ignorenicks': {\n\t\t\tPS.prefs.set('ignorenicks', value);\n\t\t\tthis.handleIgnoreNicks(value);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'rightpanel': {\n\t\t\tPS.prefs.set('rightpanelbattles', value);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'disallowspectators': {\n\t\t\tPS.prefs.set('disallowspectators', value);\n\t\t\tPS.mainmenu.disallowSpectators = value;\n\t\t\tbreak;\n\t\t}\n\t\t}\n\t};\n\tgetBattleRoom() {\n\t\tconst battleRoom = this.props.room.getParent() as BattleRoom | null;\n\t\treturn battleRoom?.battle ? battleRoom : null;\n\t}\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst battleRoom = this.getBattleRoom();\n\t\tconst isPlayer = !!battleRoom?.battle.myPokemon;\n\t\tconst canOfferTie = battleRoom && ((battleRoom.battle.turn >= 100 && isPlayer) || PS.user.group === '~');\n\t\treturn <PSPanelWrapper room={room} width={380}><div class=\"pad\">\n\t\t\t{battleRoom && <>\n\t\t\t\t<p><strong>In this battle</strong></p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tchecked={battleRoom.battle.hardcoreMode}\n\t\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleHardcoreMode}\n\t\t\t\t\t\t/> Hardcore mode (hide info not shown in-game)\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tchecked={battleRoom.battle.ignoreSpects}\n\t\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleIgnoreSpectators}\n\t\t\t\t\t\t/> Ignore spectators\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tchecked={battleRoom.battle.ignoreOpponent}\n\t\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleIgnoreOpponent}\n\t\t\t\t\t\t/> Ignore opponent\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tchecked={battleRoom.battle?.ignoreNicks}\n\t\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleIgnoreNicks}\n\t\t\t\t\t\t/> Ignore nicknames\n\t\t\t\t\t</label>\n\t\t\t\t</p>\n\t\t\t</>}\n\t\t\t<p><strong>All battles</strong></p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"disallowspectators\" checked={PS.prefs.disallowspectators || false}\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\n\t\t\t\t\t/> <abbr title=\"You can still invite spectators by giving them the URL or using the /invite command\">Invite only (hide from Battles list)</abbr>\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"ignorenicks\" checked={PS.prefs.ignorenicks || false}\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\n\t\t\t\t\t/> Ignore Pok&eacute;mon nicknames\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"ignorespects\" checked={PS.prefs.ignorespects || false}\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\n\t\t\t\t\t/> Ignore spectators\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"ignoreopp\" checked={PS.prefs.ignoreopp || false}\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\n\t\t\t\t\t/> Ignore opponent\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"autotimer\" checked={PS.prefs.autotimer || false}\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\n\t\t\t\t\t/> Automatically start timer\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t{!PS.prefs.onepanel && document.body.offsetWidth >= 800 && <p>\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"rightpanel\" checked={PS.prefs.rightpanelbattles || false}\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\n\t\t\t\t\t/> Open new battles in the right-side panel\n\t\t\t\t</label>\n\t\t\t</p>}\n\t\t\t<p class=\"buttonbar\">\n\t\t\t\t<button data-cmd=\"/close\" class=\"button\">Done</button> {}\n\t\t\t\t{battleRoom && <button data-cmd=\"/closeand /inopener /offertie\" class=\"button\" disabled={!canOfferTie}>\n\t\t\t\t\tOffer Tie\n\t\t\t\t</button>}\n\t\t\t</p>\n\t\t</div>\n\t\t</PSPanelWrapper>;\n\t}\n}\n\nclass PopupRoom extends PSRoom {\n\treturnValue: unknown = this.args?.cancelValue;\n\toverride destroy() {\n\t\t(this.args?.callback as any)?.(this.returnValue);\n\t\tsuper.destroy();\n\t}\n}\n\nclass PopupPanel extends PSRoomPanel<PopupRoom> {\n\tstatic readonly id = 'popup';\n\tstatic readonly routes = ['popup-*'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\tstatic readonly Model = PopupRoom;\n\n\thandleSubmit = (ev: Event) => {\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t\tconst room = this.props.room;\n\t\troom.returnValue = room.args?.okValue;\n\t\tconst textbox = this.base!.querySelector<HTMLInputElement>('input[name=value]');\n\t\tif (textbox) {\n\t\t\troom.returnValue = textbox.value;\n\t\t}\n\t\tthis.close();\n\t};\n\toverride componentDidMount() {\n\t\tsuper.componentDidMount();\n\t\tconst textbox = this.base!.querySelector<HTMLInputElement>('input[name=value]');\n\t\tif (!textbox) return;\n\t\ttextbox.value = this.props.room.args?.value as string || '';\n\t}\n\tparseMessage(message: string) {\n\t\tif (message.startsWith('|html|')) {\n\t\t\treturn BattleLog.sanitizeHTML(message.slice(6));\n\t\t}\n\t\treturn BattleLog.parseMessage(message);\n\t}\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst okButton = room.args?.okButton as string || 'OK';\n\t\tconst cancelButton = room.args?.cancelButton as string | undefined;\n\t\tconst otherButtons = room.args?.otherButtons as preact.ComponentChildren;\n\t\tconst value = room.args?.value as string | undefined;\n\t\tconst type = (room.args?.type || (typeof value === 'string' ? 'text' : null)) as string | null;\n\t\tconst message = room.args?.message;\n\t\treturn <PSPanelWrapper room={room} width={room.args?.width as number || 480}>\n\t\t\t<form class=\"pad\" onSubmit={this.handleSubmit}>\n\t\t\t\t{message && <p\n\t\t\t\t\tstyle=\"white-space:pre-wrap;word-wrap:break-word\"\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: this.parseMessage(message as string || '') }}\n\t\t\t\t></p>}\n\t\t\t\t{!!type && <p><input name=\"value\" type={type} class=\"textbox autofocus\" style=\"width:100%;box-sizing:border-box\" /></p>}\n\t\t\t\t<p class=\"buttonbar\">\n\t\t\t\t\t<button class={`button${!type ? ' autofocus' : ''}`} type=\"submit\" style=\"min-width:50px\">\n\t\t\t\t\t\t<strong>{okButton}</strong>\n\t\t\t\t\t</button> {}\n\t\t\t\t\t{otherButtons} {}\n\t\t\t\t\t{!!cancelButton && <button class=\"button\" data-cmd=\"/close\" type=\"button\">\n\t\t\t\t\t\t{cancelButton}\n\t\t\t\t\t</button>}\n\t\t\t\t</p>\n\t\t\t</form>\n\t\t</PSPanelWrapper>;\n\t}\n}\n\nclass RoomTabListPanel extends PSRoomPanel {\n\tstatic readonly id = 'roomtablist';\n\tstatic readonly routes = ['roomtablist'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\n\tstartingLayout = PS.prefs.onepanel;\n\thandleLayoutChange = (ev: Event) => {\n\t\tconst checkbox = ev.currentTarget as HTMLInputElement;\n\t\tPS.prefs.onepanel = checkbox.checked ? 'vertical' : this.startingLayout;\n\t\tPS.update();\n\t};\n\toverride render() {\n\t\tconst verticalTabs = PS.prefs.onepanel === 'vertical';\n\t\treturn <PSPanelWrapper room={this.props.room}><div class=\"tablist\">\n\t\t\t<ul>\n\t\t\t\t{PS.leftRoomList.map(roomid => PSHeader.renderRoomTab(roomid, true))}\n\t\t\t</ul>\n\t\t\t<ul>\n\t\t\t\t{PS.rightRoomList.map(roomid => PSHeader.renderRoomTab(roomid, true))}\n\t\t\t</ul>\n\t\t\t<div class=\"pad\"><label class=\"checkbox\"><input\n\t\t\t\ttype=\"checkbox\" checked={verticalTabs} onChange={this.handleLayoutChange}\n\t\t\t/> Try vertical tabs</label></div>\n\t\t</div></PSPanelWrapper>;\n\t}\n}\nclass BattleTimerPanel extends PSRoomPanel {\n\tstatic readonly id = 'battletimer';\n\tstatic readonly routes = ['battletimer'];\n\tstatic readonly location = 'semimodal-popup';\n\tstatic readonly noURL = true;\n\n\toverride render() {\n\t\tconst room = this.props.room.getParent() as BattleRoom;\n\t\treturn <PSPanelWrapper room={this.props.room}><div class=\"pad\">\n\t\t\t{room.battle.kickingInactive ? (\n\t\t\t\t<button class=\"button\" data-cmd=\"/closeand /inopener /timer stop\">Stop Timer</button>\n\t\t\t) : (\n\t\t\t\t<button class=\"button\" data-cmd=\"/closeand /inopener /timer start\">Start Timer</button>\n\t\t\t)}\n\t\t</div>\n\t\t</PSPanelWrapper>;\n\t}\n}\n\nclass RulesPanel extends PSRoomPanel<PopupRoom> {\n\tstatic readonly id = 'rules';\n\tstatic readonly routes = ['rules-*'];\n\tstatic readonly location = 'modal-popup';\n\tstatic readonly noURL = true;\n\tstatic readonly Model = PopupRoom;\n\tdeclare state: { canClose?: boolean | null, timeLeft?: number | null, timerRef?: any };\n\n\toverride componentDidMount() {\n\t\tsuper.componentDidMount();\n\t\tconst args = this.props.room.args;\n\t\tconst isWarn = args?.type === 'warn';\n\t\tif (isWarn && args) {\n\t\t\tconst timerRef = setInterval(() => {\n\t\t\t\tconst timeLeft = this.state.timeLeft || 5;\n\t\t\t\tconst canClose = timeLeft === 1;\n\t\t\t\tthis.setState({ canClose, timeLeft: timeLeft - 1 });\n\t\t\t\tif (canClose) {\n\t\t\t\t\tclearInterval(this.state.timerRef);\n\t\t\t\t\tthis.setState({ timerRef: null });\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t\tif (!this.state.timerRef) this.setState({ timerRef });\n\t\t}\n\t}\n\n\toverride render() {\n\t\tconst room = this.props.room;\n\t\tconst type = room.args?.type;\n\t\tconst isWarn = type === 'warn';\n\t\tconst message = room.args?.message as string || '';\n\t\treturn <PSPanelWrapper room={room} width={room.args?.width as number || 780}>\n\t\t\t<div class=\"pad\">\n\t\t\t\t{\n\t\t\t\t\tisWarn &&\n\t\t\t\t\t<p><strong style=\"color:red\">{(BattleLog.escapeHTML(message) || 'You have been warned for breaking the rules.')}\n\t\t\t\t\t</strong></p>\n\t\t\t\t}\n\t\t\t\t<h2>Pok&eacute;mon Showdown Rules</h2>\n\t\t\t\t<p><b>1.</b> Be nice to people. Respect people. Don't be rude or mean to people.</p>\n\t\t\t\t<p><b>2.</b> {' '}\n\t\t\t\t\tFollow US laws (PS is based in the US). No porn (minors use PS), don't distribute pirated material, {' '}\n\t\t\t\t\tand don't slander others.</p>\n\t\t\t\t<p><b>3.</b> {' '}\n\t\t\t\t\t&nbsp;No sex. Don't discuss anything sexually explicit, not even in private messages, {' '}\n\t\t\t\t\tnot even if you're both adults.</p>\n\t\t\t\t<p><b>4.</b> {' '}\n\t\t\t\t\t&nbsp;No cheating. Don't exploit bugs to gain an unfair advantage. {' '}\n\t\t\t\t\tDon't game the system (by intentionally losing against yourself or a friend in a ladder match, by timerstalling, etc). {' '}\n\t\t\t\t\tDon't impersonate staff if you're not.</p>\n\t\t\t\t<p><b>5.</b> {' '}\n\t\t\t\t\tModerators have discretion to punish any behaviour they deem inappropriate, whether or not it's on this list. {' '}\n\t\t\t\t\tIf you disagree with a moderator ruling, appeal to an administrator (a user with ~ next to their name) or {' '}\n\t\t\t\t\t<a href=\"https://pokemonshowdown.com/appeal\">Discipline Appeals</a>.</p>\n\t\t\t\t<p>(Note: The First Amendment does not apply to PS, since PS is not a government organization.)</p>\n\t\t\t\t<p><b>Chat</b></p>\n\t\t\t\t<p><b>1.</b> {' '}\n\t\t\t\t\tDo not spam, flame, or troll. This includes advertising, raiding, {' '}\n\t\t\t\t\tasking questions with one-word answers in the lobby, {' '}\n\t\t\t\t\tand flooding the chat such as by copy/pasting logs in the lobby.</p>\n\t\t\t\t<p><b>2.</b> {' '}\n\t\t\t\t\tDon't call unnecessary attention to yourself. Don't be obnoxious. ALL CAPS and <i>formatting</i> {' '}\n\t\t\t\t\tare acceptable to emphasize things, but should be used sparingly, not all the time.</p>\n\t\t\t\t<p><b>3.</b> {' '}\n\t\t\t\t\tNo minimodding: don't mod if it's not your job. Don't tell people they'll be muted, {' '}\n\t\t\t\t\tdon't ask for people to be muted, {' '}\n\t\t\t\t\tand don't talk about whether or not people should be muted ('inb4 mute\\, etc). {' '}\n\t\t\t\t\tThis applies to bans and other punishments, too.</p>\n\t\t\t\t<p><b>4.</b> {' '}\n\t\t\t\t\tWe reserve the right to tell you to stop discussing moderator decisions if you become unreasonable or belligerent</p>\n\t\t\t\t<p><b>5.</b> English only, unless specified otherwise.</p>\n\t\t\t\t<p>(Note: You can opt out of chat rules in private chat rooms and battle rooms, {' '}\n\t\t\t\t\tbut only if all ROs or players agree to it.)</p>\n\t\t\t\t{\n\t\t\t\t\t!isWarn && <>\n\t\t\t\t\t\t<p><b>Usernames</b></p>\n\t\t\t\t\t\t<p>Your username can be chosen and changed at any time. Keep in mind:</p>\n\t\t\t\t\t\t<p><b>1.</b> Usernames may not impersonate a recognized user (a user with %, @, #, or ~ next to their name) {' '}\n\t\t\t\t\t\t\tor a famous person/organization that uses PS or is associated with Pokémon.</p>\n\t\t\t\t\t\t<p><b>2.</b> Usernames may not be derogatory or insulting in nature, to an individual or group {' '}\n\t\t\t\t\t\t\t(insulting yourself is okay as long as it's not too serious).</p>\n\t\t\t\t\t\t<p><b>3.</b> Usernames may not directly reference sexual activity, or be excessively disgusting.</p>\n\t\t\t\t\t\t<p>This policy is less restrictive than that of many places, so you might see some \"borderline\" nicknames {' '}\n\t\t\t\t\t\t\tthat might not be accepted elsewhere. You might consider it unfair that they are allowed to keep their {' '}\n\t\t\t\t\t\t\tnickname. The fact remains that their nickname follows the above rules, and {' '}\n\t\t\t\t\t\t\tif you were asked to choose a new name, yours does not.</p>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t\t<p class=\"buttonbar\"><button\n\t\t\t\t\tname=\"close\"\n\t\t\t\t\tdata-cmd=\"/close\" class=\"button autofocus\"\n\t\t\t\t\tdisabled={!this.state.canClose}\n\t\t\t\t> Close {this.state.timerRef && <>({this.state.timeLeft} sec)</>}</button></p>\n\t\t\t</div>\n\t\t</PSPanelWrapper>;\n\t}\n}\n\nPS.addRoomType(\n\tUserPanel,\n\tUserOptionsPanel,\n\tUserListPanel,\n\tVolumePanel,\n\tOptionsPanel,\n\tLoginPanel,\n\tAvatarsPanel,\n\tChangePasswordPanel,\n\tRegisterPanel,\n\tBattleForfeitPanel,\n\tReplacePlayerPanel,\n\tBackgroundListPanel,\n\tLeaveRoomPanel,\n\tChatFormattingPanel,\n\tPopupPanel,\n\tRoomTabListPanel,\n\tBattleOptionsPanel,\n\tBattleTimerPanel,\n\tRulesPanel\n);\n"],"mappings":"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","ignoreList":[]}